(this["webpackJsonpbenga-buses"]=this["webpackJsonpbenga-buses"]||[]).push([[0],{25:function(e,t,o){},26:function(e,t,o){},27:function(e,t,o){},28:function(e,t,o){},29:function(e,t,o){},31:function(e,t,o){},32:function(e,t,o){},39:function(e,t,o){"use strict";o.r(t);var s=o(1),n=o.n(s),a=o(19),c=o.n(a),r=(o(25),o(26),o(12)),i=o.n(r),l=(o(27),o(17)),u=(o(28),o(29),o(2));var p=function(){return Object(u.jsxs)("div",{className:"group-4",children:[Object(u.jsx)("img",{className:"img-20210213-wa0006-1",src:"img-20210213-wa0006-1.png"}),Object(u.jsx)(b,{title:"ANECDOTE",line6:"line-6.png"})]})};function b(e){const{title:t,line6:o}=e;return Object(u.jsxs)("div",{className:"group-5",children:[Object(u.jsx)("div",{className:"flex-col",children:Object(u.jsxs)("div",{className:"flex-row",children:[Object(u.jsx)("h1",{className:"title roboto-black-mercury-40px",children:t}),Object(u.jsx)("div",{className:"rectangle-2"})]})}),Object(u.jsx)("img",{className:"line-6",src:o})]})}o(31);var d=function(){return Object(u.jsx)(j,{...m})};function j(e){const{overlapGroup:t,line7:o,busStop11228:s,line8:n,busStop21229:a,line9:c,busStop312210:r,line10:i}=e;return Object(u.jsx)("div",{className:"group-8",children:Object(u.jsx)("div",{className:"overlap-group rectangleStops"})})}const m={overlapGroup:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/rectangle-9@2x.png",line7:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-7@2x.png",busStop11228:"Bus stop 1",line8:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-7@2x.png",busStop21229:"Bus stop 2",line9:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-7@2x.png",busStop312210:"Bus stop 3",line10:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-10@2x.png"};var f=o(8),g=o(10);const h=[{title:"Recordings",path:"/music",icon:Object(u.jsx)(f.d,{}),cName:"nav-text"},{title:"Routes",path:"/routes",icon:Object(u.jsx)(f.e,{}),cName:"nav-text"},{title:"Contact",path:"/about",icon:Object(u.jsx)(f.c,{}),cName:"nav-text"}];o(32);var x=o(0);var v=function(){const[e,t]=Object(s.useState)(!1),o=()=>t(!e);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(x.b.Provider,{value:{color:"#fff"},children:[Object(u.jsx)("div",{className:"navbar",children:Object(u.jsx)(g.b,{to:"#",className:"menu-bars",children:Object(u.jsx)(f.a,{onClick:o})})}),Object(u.jsx)("nav",{className:"nav-menu",children:Object(u.jsxs)("ul",{className:"nav-menu-items",onClick:o,children:[Object(u.jsx)("li",{className:"navbar-toggle",children:Object(u.jsx)(g.b,{to:"#",className:"menu-bars",children:Object(u.jsx)(f.b,{})})}),h.map(((e,t)=>Object(u.jsx)("li",{className:e.cName,children:Object(u.jsx)(g.b,{to:e.path,children:e.icon})},t)))]})})]})})},O=o(3);var y=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"Music"})})};var N=function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{children:"About"})})};i.a.accessToken="pk.eyJ1IjoicHJhbm1hbjExMTAiLCJhIjoiY2trdmg3dDNqMjBidTJ1czFjZnJhdXczbCJ9.iiySDdrwpE0p-hFUAKtU7Q";var S=()=>{const e=Object(s.useRef)(null),[t,o]=Object(s.useState)(77.6517347),[n,a]=Object(s.useState)(12.9679711),[c,r]=Object(s.useState)(13),[b,j]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{const s=new i.a.Map({container:e.current,style:"mapbox://styles/pranman1110/ckljhzuuy0ibx17qo8ulkjx1m",center:[t,n],zoom:c});s.addControl(new i.a.NavigationControl,"top-right"),s.on("move",(()=>{o(s.getCenter().lng.toFixed(4)),a(s.getCenter().lat.toFixed(4)),r(s.getZoom().toFixed(2))}));var u={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"random point to iterate",icon:"bus"},geometry:{type:"Point",coordinates:[0,0]}}]},p={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"random point to iterate",icon:"bus"},geometry:{type:"Point",coordinates:[0,0]}}]},b={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"random point to iterate",icon:"bus"},geometry:{type:"Point",coordinates:[0,0]}}]};return s.on("load",(function(){s.addSource("currRoute",{type:"geojson",data:p}),s.addLayer({id:"currRoute",type:"line",source:"currRoute",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":5}}),s.addSource("currstops",{type:"geojson",data:b}),s.addSource("point",{type:"geojson",data:u}),s.addSource("busstops",{type:"geojson",data:"https://pranman11.github.io/bus-data/busstops.geojson"}),s.addLayer({id:"busstops",source:"busstops",type:"symbol",layout:{"icon-size":2,"icon-image":"bus","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0}});var e=new i.a.Popup;s.on("mouseenter","busstops",(t=>{s.getCanvas().style.cursor="pointer",console.log(t.features[0].properties);for(var o=t.features[0].properties.busNo,n=t.features[0].properties.description,a=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;e.setLngLat(t.lngLat).setHTML("<p><strong>Bus: "+o+"<br>Bus Stop: "+n+'</strong></p><button id="startjourney-'+o+'">Start Journey</button>').addTo(s),document.getElementById("startjourney-"+o).addEventListener("click",(()=>{s.getSource("currRoute").setData(p),e.remove(),console.log(this),new Audio(t.features[0].properties.journeySoundUrl).play();var o=null;fetch(t.features[0].properties.busRouteUrl).then((e=>e.json())).then((e=>{o=e,s.getSource("currRoute").setData(o.features[0]);var t;t=l.length(o.features[0]);var n=[];console.log(o.features[0].geometry.coordinates[0]),s.flyTo({center:o.features[0].geometry.coordinates[0],zoom:16,speed:.5});for(var a=0;a<t;a+=t/1e4){var c=l.along(o.features[0],a);n.push(c.geometry.coordinates)}o.features[0].geometry.coordinates=n,setTimeout(function(e){console.log(this),console.log(e.features[0].geometry.coordinates)}(o),2e3),j(!0)})).catch((e=>{console.log(e)}))}))}))})),()=>s.remove()}),[]),Object(u.jsxs)("div",{children:[Object(u.jsxs)(g.a,{children:[Object(u.jsx)(v,{}),Object(u.jsxs)(O.c,{children:[Object(u.jsx)(O.a,{path:"/about",component:N}),Object(u.jsx)(O.a,{path:"/music",component:y})]})]}),Object(u.jsx)("div",{className:"anecdote-modal ".concat(b?"Show":""),children:Object(u.jsx)(p,{})}),Object(u.jsx)("div",{className:"stops-modal ".concat(b?"Show":""),children:Object(u.jsx)(d,{})}),Object(u.jsx)("div",{className:"map-container",ref:e})]})};var w=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(S,{})})},C=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,40)).then((function(t){var o=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,c=t.getTTFB;o(e),s(e),n(e),a(e),c(e)}))};c.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root")),C()}},[[39,1,2]]]);
//# sourceMappingURL=main.b44e5f90.chunk.js.map