(this["webpackJsonpbenga-buses"]=this["webpackJsonpbenga-buses"]||[]).push([[0],{25:function(e,t,o){},26:function(e,t,o){},27:function(e,t,o){},28:function(e,t,o){},29:function(e,t,o){},31:function(e,t,o){},32:function(e,t,o){},39:function(e,t,o){"use strict";o.r(t);var n=o(1),a=o.n(n),s=o(19),r=o.n(s),c=(o(25),o(26),o(13)),i=o.n(c),u=(o(27),o(11)),l=(o(28),o(29),o(2));var p=function(){return Object(l.jsxs)("div",{className:"group-4",children:[Object(l.jsx)("img",{className:"img-20210213-wa0006-1",src:"img-20210213-wa0006-1.png"}),Object(l.jsx)(d,{title:"ANECDOTE",line6:"line-6.png"})]})};function d(e){const{title:t,line6:o}=e;return Object(l.jsxs)("div",{className:"group-5",children:[Object(l.jsx)("div",{className:"flex-col",children:Object(l.jsxs)("div",{className:"flex-row",children:[Object(l.jsx)("h1",{className:"title roboto-black-mercury-40px",children:t}),Object(l.jsx)("div",{className:"rectangle-2"})]})}),Object(l.jsx)("img",{className:"line-6",src:o})]})}o(31);var b=function(){return Object(l.jsx)(j,{...m})};function j(e){const{overlapGroup:t,line7:o,busStop11228:n,line8:a,busStop21229:s,line9:r,busStop312210:c,line10:i}=e;return Object(l.jsx)("div",{className:"group-8",children:Object(l.jsx)("div",{className:"overlap-group rectangleStops"})})}const m={overlapGroup:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/rectangle-9@2x.png",line7:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-7@2x.png",busStop11228:"Bus stop 1",line8:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-7@2x.png",busStop21229:"Bus stop 2",line9:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-7@2x.png",busStop312210:"Bus stop 3",line10:"https://anima-uploads.s3.amazonaws.com/projects/60754f9e3840f78fc11beaff/releases/6075a151f28b6b1d17a1feb0/img/line-10@2x.png"};var g=o(8),f=o(10);const h=[{title:"Recordings",path:"/music",icon:Object(l.jsx)(g.d,{}),cName:"nav-text"},{title:"Routes",path:"/routes",icon:Object(l.jsx)(g.e,{}),cName:"nav-text"},{title:"Contact",path:"/about",icon:Object(l.jsx)(g.c,{}),cName:"nav-text"}];o(32);var x=o(0);var v=function(){const[e,t]=Object(n.useState)(!1),o=()=>t(!e);return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)(x.b.Provider,{value:{color:"#fff"},children:[Object(l.jsx)("div",{className:"navbar",children:Object(l.jsx)(f.b,{to:"#",className:"menu-bars",children:Object(l.jsx)(g.a,{onClick:o})})}),Object(l.jsx)("nav",{className:"nav-menu",children:Object(l.jsxs)("ul",{className:"nav-menu-items",onClick:o,children:[Object(l.jsx)("li",{className:"navbar-toggle",children:Object(l.jsx)(f.b,{to:"#",className:"menu-bars",children:Object(l.jsx)(g.b,{})})}),h.map(((e,t)=>Object(l.jsx)("li",{className:e.cName,children:Object(l.jsx)(f.b,{to:e.path,children:e.icon})},t)))]})})]})})},O=o(3);var y=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"Music"})})};var N=function(){return Object(l.jsx)("div",{children:Object(l.jsx)("h1",{children:"About"})})};i.a.accessToken="pk.eyJ1IjoicHJhbm1hbjExMTAiLCJhIjoiY2trdmg3dDNqMjBidTJ1czFjZnJhdXczbCJ9.iiySDdrwpE0p-hFUAKtU7Q";var S=()=>{const e=Object(n.useRef)(null),[t,o]=Object(n.useState)(77.5985813140869),[a,s]=Object(n.useState)(12.943333543267157),[r,c]=Object(n.useState)(12),[d,j]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{const n=new i.a.Map({container:e.current,style:"mapbox://styles/pranman1110/ckljhzuuy0ibx17qo8ulkjx1m",center:[t,a],zoom:r});n.addControl(new i.a.NavigationControl,"top-right"),n.on("move",(()=>{o(n.getCenter().lng.toFixed(4)),s(n.getCenter().lat.toFixed(4)),c(n.getZoom().toFixed(2))}));var l={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"random point to iterate",icon:"bus"},geometry:{type:"Point",coordinates:[0,0]}}]},p={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"random point to iterate",icon:"bus"},geometry:{type:"Point",coordinates:[0,0]}}]},d={type:"FeatureCollection",features:[{type:"Feature",properties:{description:"random point to iterate",icon:"bus"},geometry:{type:"Point",coordinates:[0,0]}}]},b=1e4,m=0;return n.on("load",(function(){n.addSource("currRoute",{type:"geojson",data:p}),n.addLayer({id:"currRoute",type:"line",source:"currRoute",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":5}}),n.addSource("currstops",{type:"geojson",data:d}),n.addSource("point",{type:"geojson",data:l}),n.addLayer({id:"point",source:"point",type:"symbol",layout:{"icon-size":2,"icon-image":"bus","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0}}),n.addSource("busstops",{type:"geojson",data:"https://pranman11.github.io/bus-data/busstops.geojson"}),n.addLayer({id:"busstops",source:"busstops",type:"symbol",layout:{"icon-size":2,"icon-image":"bus","icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0}});var e=new i.a.Popup;function t(e){console.log("inside animate");var o=e.features[0].geometry.coordinates[m>=b?m-1:m],a=e.features[0].geometry.coordinates[m>=b?m:m+1];o&&a&&(l.features[0].geometry.coordinates=e.features[0].geometry.coordinates[m],l.features[0].properties.bearing=u.bearing(u.point(o),u.point(a)),n.getSource("point").setData(l),n.panTo(o,{duration:100}),m<b&&(console.log(b),requestAnimationFrame((()=>t(e)))),m+=1)}n.on("mouseenter","busstops",(o=>{n.getCanvas().style.cursor="pointer",console.log(o.features[0].properties);for(var a=o.features[0].properties.busNo,s=o.features[0].properties.description,r=o.features[0].geometry.coordinates.slice();Math.abs(o.lngLat.lng-r[0])>180;)r[0]+=o.lngLat.lng>r[0]?360:-360;e.setLngLat(o.lngLat).setHTML("<p><strong>Bus: "+a+"<br>Bus Stop: "+s+'</strong></p><button id="startjourney-'+a+'">Start Journey</button>').addTo(n),document.getElementById("startjourney-"+a).addEventListener("click",(()=>{n.getSource("currRoute").setData(p),e.remove(),console.log(this);var a=new Audio(o.features[0].properties.journeySoundUrl);a.sound=0,a.play(),a.sound+=.1;var s=null;fetch(o.features[0].properties.busRouteUrl).then((e=>e.json())).then((e=>{s=e,n.getSource("currRoute").setData(s.features[0]);var o;o=u.length(s.features[0]);var a=[];console.log(s.features[0].geometry.coordinates[0]),n.flyTo({center:s.features[0].geometry.coordinates[0],zoom:15,speed:.5});for(var r=0;r<o;r+=o/b){var c=u.along(s.features[0],r);a.push(c.geometry.coordinates)}s.features[0].geometry.coordinates=a,setTimeout((()=>t(s)),4e3),j(!0)})).catch((e=>{console.log(e)}))}))}))})),()=>n.remove()}),[]),Object(l.jsxs)("div",{children:[Object(l.jsxs)(f.a,{children:[Object(l.jsx)(v,{}),Object(l.jsxs)(O.c,{children:[Object(l.jsx)(O.a,{path:"/about",component:N}),Object(l.jsx)(O.a,{path:"/music",component:y})]})]}),Object(l.jsx)("div",{className:"anecdote-modal ".concat(d?"Show":""),children:Object(l.jsx)(p,{})}),Object(l.jsx)("div",{className:"stops-modal ".concat(d?"Show":""),children:Object(l.jsx)(b,{})}),Object(l.jsx)("div",{className:"map-container",ref:e})]})};var w=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(S,{})})},C=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,40)).then((function(t){var o=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;o(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root")),C()}},[[39,1,2]]]);
//# sourceMappingURL=main.5195cd0b.chunk.js.map